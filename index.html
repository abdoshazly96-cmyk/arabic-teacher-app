<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تطبيق البيان - النسخة المضمونة 100%</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Noto+Sans+Arabic:wght@300;400;700&display=swap');
        body { font-family: 'Noto Sans Arabic', sans-serif; background-color: #f1f5f9; }
        .font-serif { font-family: 'Amiri', serif; }
        .word-item:hover { background-color: #e0e7ff; color: #4338ca; border-radius: 4px; }
        .active-word { color: #4338ca; font-weight: bold; border-bottom: 3px solid #6366f1; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const dictionary = {
            "العربية": { t: "Arabic", d: "لغة القرآن الكريم ولغة الضاد.", e: "أنا أتعلم اللغة العربية." },
            "لغة": { t: "Language", d: "وسيلة التواصل بين البشر.", e: "العربية لغة جميلة." },
            "عريقة": { t: "Ancient", d: "شيء قديم وله أصل أصيل.", e: "مصر لها حضارة عريقة." },
            "جميلة": { t: "Beautiful", d: "صفة للشيء الحسن والمبهج.", e: "الحديقة جميلة جداً." },
            "تمتاز": { t: "Distinguished", d: "تنفرد بصفات تميزها عن غيرها.", e: "تمتاز الزهور بألوانها." },
            "ببلاغتها": { t: "Eloquence", d: "الفصاحة والقدرة على التعبير القوي.", e: "نص متميز ببلاغته." },
            "اتساع": { t: "Vastness", d: "كبر المساحة أو كثرة المحتوى.", e: "يدهشنا اتساع البحر." },
            "مفرداتها": { t: "Vocabulary", d: "الكلمات التي تتكون منها اللغة.", e: "مفردات الكتاب سهلة." }
        };

        const App = () => {
            const [tab, setTab] = useState('read');
            const [selected, setSelected] = useState(null);
            const [saved, setSaved] = useState([]);
            const text = "العَرَبِيَّةُ لُغَةٌ عَرِيقَةٌ وَجَمِيلَةٌ، تَمْتَازُ بِبَلَاغَتِهَا وَاتِّسَاعِ مُفْرَدَاتِهَا.";

            // نظام النطق المضمون
            const speak = (txt) => {
                if (!window.speechSynthesis) {
                    console.error("متصفحك لا يدعم النطق الآلي.");
                    return;
                }
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(txt);
                utterance.lang = 'ar-SA';
                utterance.rate = 0.8;
                utterance.pitch = 1;
                window.speechSynthesis.speak(utterance);
            };

            const handleWord = (word) => {
                const clean = word.replace(/[^\u0621-\u064A]/g, '');
                setSelected(clean);
                if (dictionary[clean] && !saved.find(s => s.word === clean)) {
                    setSaved([...saved, { word: clean, ...dictionary[clean] }]);
                }
            };

            useEffect(() => {
                // تفعيل الأيقونات
                if (window.lucide) window.lucide.createIcons();
            }, [tab, selected]);

            return (
                <div className="flex h-screen bg-slate-100 overflow-hidden" dir="rtl">
                    {/* القائمة الجانبية */}
                    <nav className="w-20 bg-slate-900 text-white flex flex-col items-center py-8 space-y-8 shadow-2xl">
                        <div className="w-12 h-12 bg-indigo-600 rounded-2xl flex items-center justify-center font-bold text-2xl shadow-lg">ب</div>
                        <button onClick={() => setTab('read')} className={`p-3 rounded-xl transition ${tab === 'read' ? 'bg-indigo-600' : 'opacity-40'}`}><i data-lucide="book"></i></button>
                        <button onClick={() => setTab('dict')} className={`p-3 rounded-xl transition ${tab === 'dict' ? 'bg-indigo-600' : 'opacity-40'}`}><i data-lucide="layers"></i></button>
                        <button onClick={() => setTab('quiz')} className={`p-3 rounded-xl transition ${tab === 'quiz' ? 'bg-indigo-600' : 'opacity-40'}`}><i data-lucide="help-circle"></i></button>
                    </nav>

                    {/* المحتوى الرئيسي */}
                    <div className="flex-1 flex flex-col overflow-hidden">
                        <header className="h-20 bg-white border-b px-8 flex items-center justify-between shadow-sm">
                            <h1 className="text-xl font-bold text-slate-800 font-serif">تطبيق البيان - لتعليم العربية</h1>
                            <div className="bg-indigo-50 text-indigo-600 px-4 py-2 rounded-full text-sm font-bold">الكلمات: {saved.length}</div>
                        </header>

                        <main className="flex-1 overflow-y-auto p-10">
                            {tab === 'read' && (
                                <div className="max-w-4xl mx-auto space-y-8 animate-in fade-in duration-700">
                                    <div className="flex gap-4">
                                        <button onClick={() => speak(text)} className="flex items-center gap-2 bg-indigo-600 text-white px-8 py-4 rounded-2xl font-bold shadow-xl hover:scale-105 transition-all active:scale-95">
                                            <i data-lucide="volume-2"></i> استماع للنص كاملاً
                                        </button>
                                    </div>
                                    <div className="bg-white p-12 rounded-[3rem] shadow-xl border border-slate-100">
                                        <p className="text-4xl leading-[2.5] font-serif text-slate-800 text-right">
                                            {text.split(' ').map((word, i) => (
                                                <span 
                                                    key={i} 
                                                    onClick={() => handleWord(word)} 
                                                    className={`cursor-pointer px-1 transition-all word-item ${selected === word.replace(/[^\u0621-\u064A]/g, '') ? 'active-word' : ''}`}
                                                >
                                                    {word}{' '}
                                                </span>
                                            ))}
                                        </p>
                                    </div>
                                    <div className="bg-amber-50 p-6 rounded-2xl border-r-4 border-amber-400 text-amber-800 text-sm">
                                        <i data-lucide="info" className="inline-block ml-2 w-4 h-4"></i>
                                        نصيحة: اضغط على أي كلمة لعرض ترجمتها ونطقها المنفرد في اللوحة الجانبية.
                                    </div>
                                </div>
                            )}

                            {tab === 'dict' && (
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-5xl mx-auto">
                                    {saved.length === 0 ? (
                                        <div className="col-span-full py-20 text-center text-slate-400 font-bold border-2 border-dashed rounded-3xl">لم تحفظ أي كلمات بعد. عد للقارئ واضغط على الكلمات.</div>
                                    ) : saved.map((w, i) => (
                                        <div key={i} className="bg-white p-6 rounded-3xl border shadow-sm flex justify-between items-start group hover:border-indigo-300 transition-all">
                                            <div>
                                                <h3 className="text-2xl font-bold font-serif text-slate-900">{w.word}</h3>
                                                <p className="text-indigo-600 font-bold mb-3">{w.t}</p>
                                                <p className="text-sm text-slate-500 leading-relaxed">{w.d}</p>
                                            </div>
                                            <button onClick={() => speak(w.word)} className="p-3 bg-indigo-50 text-indigo-600 rounded-full group-hover:bg-indigo-600 group-hover:text-white transition-all shadow-sm"><i data-lucide="volume-2"></i></button>
                                        </div>
                                    ))}
                                </div>
                            )}

                            {tab === 'quiz' && (
                                <div className="max-w-xl mx-auto py-10">
                                    <div className="bg-white p-10 rounded-[3rem] shadow-2xl border text-center">
                                        <div className="w-16 h-16 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-6"><i data-lucide="award"></i></div>
                                        <h2 className="text-2xl font-bold mb-4">اختبر معلوماتك</h2>
                                        <p className="text-slate-500 mb-8 font-medium italic">ما هو المعنى الصحيح لكلمة "العربية"؟</p>
                                        <div className="space-y-4">
                                            {["Arabic", "English", "Ancient"].map((opt, i) => (
                                                <button key={i} onClick={() => alert(i===0 ? "إجابة صحيحة!" : "حاول ثانية")} className="w-full p-4 border-2 rounded-2xl font-bold hover:bg-indigo-50 hover:border-indigo-600 transition-all">{opt}</button>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            )}
                        </main>
                    </div>

                    {/* لوحة المعلومات الجانبية */}
                    <aside className="w-96 bg-white border-r shadow-2xl p-8 overflow-y-auto">
                        {selected ? (
                            <div className="space-y-8 animate-in slide-in-from-right duration-300">
                                <div className="flex justify-between items-center">
                                    <h2 className="text-5xl font-bold font-serif text-slate-900">{selected}</h2>
                                    <button onClick={() => speak(selected)} className="p-4 bg-indigo-50 text-indigo-600 rounded-full shadow-sm hover:bg-indigo-100 transition-all"><i data-lucide="volume-2"></i></button>
                                </div>
                                <div className="space-y-6">
                                    <div className="bg-indigo-600 text-white p-6 rounded-3xl shadow-lg relative overflow-hidden">
                                        <p className="text-[10px] font-bold opacity-50 mb-1 uppercase tracking-widest">Translation</p>
                                        <p className="text-3xl font-bold">{(dictionary[selected] || {}).t || "Word"}</p>
                                    </div>
                                    <div className="bg-slate-50 p-6 rounded-3xl border border-slate-100">
                                        <p className="text-xs font-bold text-slate-400 mb-2 uppercase tracking-widest">الشرح المعجمي</p>
                                        <p className="text-lg text-slate-700 leading-relaxed font-medium">{(dictionary[selected] || {}).d || "كلمة تعليمية من نص البيان المختارة."}</p>
                                    </div>
                                    <div className="bg-amber-50 p-6 rounded-3xl border-r-8 border-amber-400">
                                        <p className="text-xs font-bold text-amber-700 mb-2 uppercase tracking-widest">مثال في جملة</p>
                                        <p className="text-xl italic font-serif text-slate-600 leading-relaxed">"{(dictionary[selected] || {}).e || "هذه الكلمة جزء من جملة مفيدة."}"</p>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="h-full flex flex-col items-center justify-center text-slate-300 text-center space-y-4">
                                <i data-lucide="mouse-pointer-2" className="w-12 h-12 opacity-30"></i>
                                <p className="font-bold">اضغط على كلمة<br/>للتحليل الفوري</p>
                            </div>
                        )}
                    </aside>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
